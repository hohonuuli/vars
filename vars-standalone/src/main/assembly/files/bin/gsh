#!/bin/sh
###############################################################################
# $Id: $
# GSH: Execute groovy script using the projects library directory.

VARS_HOME=`dirname "$0"`/..
VARS_CLASSPATH="$VARS_HOME/conf":"$VARS_HOME/lib/*"

GSH_CLASSPATH="${HOME}/.groovy/lib"
for jar in $(ls ${HOME}/.groovy/lib/*.jar)
do
    GSH_CLASSPATH=$GSH_CLASSPATH:"$jar"
done

GSH_CLASSPATH=$GSH_CLASSPATH:"${VARS_HOME}/scripts/groovy":$VARS_CLASSPATH

if [ -z $1 ]; then
    echo $FNAME " Starting Groovy shell"
    ${JAVACMD:=java} -d32 -Xms16m -Xmx512m \
         -Duser.timezone=UTC \
         -Dfile.encoding=UTF8 \
         -classpath $GSH_CLASSPATH \
         -Djava.security.manager \
         -Djava.security.policy==$VARS_HOME/conf/java.policy \
         org.codehaus.groovy.tools.shell.Main "$@"
else
    ${JAVACMD:=java} -d32 -Xms16m -Xmx512m \
         -Duser.timezone=UTC \
         -Dfile.encoding=UTF8 \
         -classpath $GSH_CLASSPATH \
         -Djava.security.manager \
         -Djava.security.policy==$VARS_HOME/conf/java.policy \
         groovy.ui.GroovyMain "$@"
fi